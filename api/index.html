<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@wrtn/hub-backend</title><meta name="description" content="Documentation for @wrtn/hub-backend"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@wrtn/hub-backend</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>@wrtn/hub-backend</h2></div><div class="tsd-panel tsd-typography"><a id="md:hub-backend" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Hub Backend<a href="#md:hub-backend" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><a id="md:1-outine" class="tsd-anchor"></a><h2 class="tsd-anchor-link">1. Outine<a href="#md:1-outine" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Hub Backend ëŠ” API ì¤‘ê°œ ê±°ë˜ì†Œ ì„œë¹„ìŠ¤, ë¤¼íŠ¼ í—ˆë¸Œì˜ ë°±ì—”ë“œ ì‹œìŠ¤í…œì´ë‹¤.</p>
<p>ê·¸ë¦¬ê³  Studio ë¼ê³  í•˜ì—¬, ë¹„ì¥¬ì–¼ ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ì˜ ë…¸ì½”ë“œ í”„ë¡œê·¸ë¨ ë¹Œë“œ íˆ´ ë˜í•œ í¬í•¨í•˜ê³  ìˆë‹¤.</p>
<p>ë³¸ í”„ë¡œì íŠ¸ ì°¸ì—¬ìëŠ” í•„íˆ ì•„ë˜ <a href="media/ERD.md">ERD ì„¤ê³„/í•´ì„¤ì„œ</a> ë¥¼ ìˆ™ì§€í•  ê²ƒ.</p>
<a id="md:2-setup" class="tsd-anchor"></a><h2 class="tsd-anchor-link">2. Setup<a href="#md:2-setup" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><blockquote>
<p>ì „ì²´ì ìœ¼ë¡œ, ë‹¤ìŒ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ë©´ ëœë‹¤.</p>
<pre><code class="bash"><span class="hl-0">git</span><span class="hl-1"> </span><span class="hl-2">clone</span><span class="hl-1"> </span><span class="hl-2">https://gitlab.wrtn.club/wrtn/gh-devs-be</span><br/><span class="hl-0">cd</span><span class="hl-1"> </span><span class="hl-2">gh-devs-be</span><br/><span class="hl-0">bash</span><span class="hl-1"> </span><span class="hl-2">postgres.sh</span><span class="hl-1"> </span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">build</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">schema</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">test</span><span class="hl-1"> </span><span class="hl-3">--</span><span class="hl-1"> </span><span class="hl-3">--reset</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1"> </span>
</code><button type="button">Copy</button></pre>

</blockquote>
<a id="md:21-nodejs" class="tsd-anchor"></a><h3 class="tsd-anchor-link">2.1. NodeJS<a href="#md:21-nodejs" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><a href="https://nodejs.org/en/" target="_blank" class="external">https://nodejs.org/en/</a></p>
<p>NodeJS v20 ì„ ì„¤ì¹˜í•œë‹¤.</p>
<a id="md:22-postgres" class="tsd-anchor"></a><h3 class="tsd-anchor-link">2.2. Postgres<a href="#md:22-postgres" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="bash"><span class="hl-0">bash</span><span class="hl-1"> </span><span class="hl-2">postgres.sh</span>
</code><button type="button">Copy</button></pre>

<p>ìœ„ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰ì‹œ, ë„ì»¤ë¥¼ í†µí•˜ì—¬ Postgres ë¥¼ ìë™ ì„¤ì¹˜í•˜ê³ , DB ìŠ¤í‚¤ë§ˆë¥¼ êµ¬ì„±í•´ì¤€ë‹¤.</p>
<a id="md:23-backend-server" class="tsd-anchor"></a><h3 class="tsd-anchor-link">2.3. Backend Server<a href="#md:23-backend-server" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="bash"><span class="hl-0">git</span><span class="hl-1"> </span><span class="hl-2">clone</span><span class="hl-1"> </span><span class="hl-2">https://gitlab.wrtn.club/wrtn/gh-devs-be</span><br/><span class="hl-0">cd</span><span class="hl-1"> </span><span class="hl-2">gh-devs-be</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">build</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">schema</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">test</span><span class="hl-1"> </span><span class="hl-3">--</span><span class="hl-1"> </span><span class="hl-3">--reset</span><span class="hl-1"> </span><span class="hl-3">true</span>
</code><button type="button">Copy</button></pre>

<p>ë³¸ Hub ë°±ì—”ë“œ ì„œë²„ë¥¼ í´ë¡  í›„, ìœ„ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì—¬ ë¹Œë“œí•˜ê³  ì„¤ì •í•˜ê³  ì‹¤í–‰í•´ë³´ì.</p>
<p>NodeJS ì™€ Postgres ê°€ ì •ìƒì ìœ¼ë¡œ ì„¤ì¹˜ë˜ì—ˆë‹¤ë©´, DB í…Œì´ë¸”ë„ ë¡œì»¬ì— ìë™ìœ¼ë¡œ ìƒì„±ëœë‹¤.</p>
<p>ê·¸ë¦¬ê³  í…ŒìŠ¤íŠ¸ í”„ë¡œê·¸ë¨ì´ ë™ì‘í•˜ì—¬ ë°±ì—”ë“œ ì„œë²„ê°€ ì •ìƒ ë™ì‘í•  ìˆ˜ ìˆëŠ”ì§€ ê²€ì¦í•´ì¤€ë‹¤.</p>
<a id="md:24-aws" class="tsd-anchor"></a><h3 class="tsd-anchor-link">2.4 AWS<a href="#md:24-aws" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>AWS ê³„ì•½ìœ¼ë¡œ ì¸í•´ 90 ì¼ ë§ˆë‹¤ AWS access keyë¥¼ ë³€ê²½ í•´ì•¼ í•˜ëŠ” ì¡°ê±´ì´ ìƒê²¼ë‹¤.</p>
<p>ê·¸ì— ë”°ë¼ AWS access keyë¥¼ ì‚­ì œ í•˜ì—¬ iam í˜•íƒœì˜ IRSAë¥¼ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½ í•˜ì˜€ë‹¤.</p>
<p>ë¡œì»¬ì„œ AWSë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì ˆì°¨ê°€ í•„ìš”í•˜ë‹¤.</p>
<ul>
<li>accesskeyê°€ ì—†ê¸° ë•Œë¬¸ì—</li>
</ul>
<pre><code class="bash"><span class="hl-0">aws</span><span class="hl-1"> </span><span class="hl-2">configure</span><br/><br/><span class="hl-0">aws</span><span class="hl-1"> </span><span class="hl-2">configure</span><br/><span class="hl-0">AWS</span><span class="hl-1"> </span><span class="hl-2">Access</span><span class="hl-1"> </span><span class="hl-2">Key</span><span class="hl-1"> </span><span class="hl-2">ID</span><span class="hl-1"> [****************ABCD]:</span><br/><span class="hl-0">AWS</span><span class="hl-1"> </span><span class="hl-2">Secret</span><span class="hl-1"> </span><span class="hl-2">Access</span><span class="hl-1"> </span><span class="hl-2">Key</span><span class="hl-1"> [****************abcd]:</span><br/><span class="hl-0">Default</span><span class="hl-1"> </span><span class="hl-2">region</span><span class="hl-1"> </span><span class="hl-2">name</span><span class="hl-1"> [ap-northeast-2]:</span><br/><span class="hl-0">Default</span><span class="hl-1"> </span><span class="hl-2">output</span><span class="hl-1"> </span><span class="hl-2">format</span><span class="hl-1"> [None]:</span>
</code><button type="button">Copy</button></pre>

<a id="md:25-docker-ì•ˆí•´ë„-ë¨" class="tsd-anchor"></a><h2 class="tsd-anchor-link">2.5. Docker (ì•ˆí•´ë„ ë¨)<a href="#md:25-docker-ì•ˆí•´ë„-ë¨" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Dockerë¥¼ ì„¤ì¹˜ í•œë‹¤.</p>
<pre><code class="bash"><span class="hl-0">brew</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-3">--cask</span><span class="hl-1"> </span><span class="hl-2">docker</span><br/><span class="hl-0">docker</span><span class="hl-1"> </span><span class="hl-2">version</span><br/><span class="hl-0">docker-compose</span><span class="hl-1"> </span><span class="hl-3">--version</span>
</code><button type="button">Copy</button></pre>

<p>gh-devs-be í”„ë¡œì íŠ¸ íŒŒì¼ ì•ˆìœ¼ë¡œ ì ‘ê·¼í›„.</p>
<pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">prisma</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">build</span><br/><br/><span class="hl-0">docker</span><span class="hl-1"> </span><span class="hl-2">compose</span><span class="hl-1"> </span><span class="hl-2">up</span><span class="hl-1"> </span><span class="hl-3">-d</span><br/><span class="hl-0">docekr</span><span class="hl-1"> </span><span class="hl-2">ps</span>
</code><button type="button">Copy</button></pre>

<p>ê²°ê³¼ (ì•„ë˜ì™€ ê°™ì´ ë‚˜ì˜¤ë©´ ì„±ê³µ)</p>
<pre><code class="bash"><span class="hl-0">CONTAINER</span><span class="hl-1"> </span><span class="hl-2">ID</span><span class="hl-1">   </span><span class="hl-2">IMAGE</span><span class="hl-1">            </span><span class="hl-2">COMMAND</span><span class="hl-1">                  </span><span class="hl-2">CREATED</span><span class="hl-1">          </span><span class="hl-2">STATUS</span><span class="hl-1">          </span><span class="hl-2">PORTS</span><span class="hl-1">                      </span><span class="hl-2">NAMES</span><br/><span class="hl-0">571ef5523e97</span><span class="hl-1">   </span><span class="hl-2">gh-devs-be-app</span><span class="hl-1">   </span><span class="hl-2">&quot;docker-entrypoint.sâ€¦&quot;</span><span class="hl-1">   </span><span class="hl-2">About</span><span class="hl-1"> </span><span class="hl-2">a</span><span class="hl-1"> </span><span class="hl-2">minute</span><span class="hl-1"> </span><span class="hl-2">ago</span><span class="hl-1">   </span><span class="hl-2">Up</span><span class="hl-1"> </span><span class="hl-2">About</span><span class="hl-1"> </span><span class="hl-2">a</span><span class="hl-1"> </span><span class="hl-2">minute</span><span class="hl-1">   </span><span class="hl-2">0.0.0.0:27001</span><span class="hl-1">-&gt;</span><span class="hl-2">27001/tcp</span><span class="hl-1">   </span><span class="hl-2">gh-devs-be</span><br/><span class="hl-0">7371b89d672c</span><span class="hl-1">   </span><span class="hl-2">postgres:16</span><span class="hl-1">      </span><span class="hl-2">&quot;docker-entrypoint.sâ€¦&quot;</span><span class="hl-1">   </span><span class="hl-2">About</span><span class="hl-1"> </span><span class="hl-2">a</span><span class="hl-1"> </span><span class="hl-2">minute</span><span class="hl-1"> </span><span class="hl-2">ago</span><span class="hl-1">   </span><span class="hl-2">Up</span><span class="hl-1"> </span><span class="hl-2">About</span><span class="hl-1"> </span><span class="hl-2">a</span><span class="hl-1"> </span><span class="hl-2">minute</span><span class="hl-1">   </span><span class="hl-2">0.0.0.0:5432</span><span class="hl-1">-&gt;</span><span class="hl-2">5432/tcp</span><span class="hl-1">   </span><span class="hl-2">gh-devs-postgres</span>
</code><button type="button">Copy</button></pre>

<p>í˜¸ì¶œ í…ŒìŠ¤íŠ¸</p>
<pre><code class="bash"><span class="hl-0">curl</span><span class="hl-1"> </span><span class="hl-3">-v</span><span class="hl-1"> </span><span class="hl-2">http://127.0.0.1:27001/monitors/health</span>
</code><button type="button">Copy</button></pre>

<p>ê²°ê³¼</p>
<pre><code class="bash"><span class="hl-1">* Trying 127.0.0.1:27001...</span><br/><span class="hl-1">* Connected to 127.0.0.1 (</span><span class="hl-0">127.0.0.1</span><span class="hl-1">) port 27001 (#0)</span><br/><span class="hl-0">â€º</span><span class="hl-1"> </span><span class="hl-2">GET</span><span class="hl-1"> </span><span class="hl-2">/monitors/health</span><span class="hl-1"> </span><span class="hl-2">HTTP/1.1</span><br/><span class="hl-1">&gt; Host: 127.0.0.1:27001</span><br/><span class="hl-1">&gt; User-Agent: curl/8.1.2</span><br/><span class="hl-1">&gt; Accept: */*</span><br/><span class="hl-0">curl</span><span class="hl-1"> </span><span class="hl-2">http://127.0.0.1:27001/monitors/health</span><br/><span class="hl-0">curl</span><span class="hl-1"> </span><span class="hl-3">-v</span><span class="hl-1"> </span><span class="hl-2">http:</span><span class="hl-1"> </span><span class="hl-2">//127.0.0.1:27001/monitors/health</span><br/><span class="hl-0">â€¹</span><span class="hl-1"> </span><span class="hl-2">ĞĞ¢Ğ¢Ğ /1.1</span><span class="hl-1"> </span><span class="hl-4">200</span><span class="hl-1"> </span><span class="hl-2">0K</span><br/><span class="hl-0">â€¹</span><span class="hl-1"> </span><span class="hl-2">vary:</span><span class="hl-1"> </span><span class="hl-2">Origin</span><br/><span class="hl-0">â€¹</span><span class="hl-1"> </span><span class="hl-2">access-control-allow-origin:</span><span class="hl-1"> </span><span class="hl-3">*</span><span class="hl-1"> </span><span class="hl-2">â€¹</span><span class="hl-1"> </span><span class="hl-2">content-type:</span><span class="hl-1"> </span><span class="hl-2">application/json</span><span class="hl-1"> &lt; </span><span class="hl-2">content-length:</span><span class="hl-1"> </span><span class="hl-4">0</span><br/><span class="hl-1">&lt; Date: Thu, 09 Nov 2023 12:06:22 GMT</span><br/><span class="hl-0">â€¹</span><span class="hl-1"> </span><span class="hl-2">Connection:</span><span class="hl-1"> </span><span class="hl-2">keep-alive</span><br/><span class="hl-0">â€¹</span><span class="hl-1"> </span><span class="hl-2">Keep-Alive:</span><span class="hl-1"> </span><span class="hl-2">timeout=</span><span class="hl-4">72</span><br/><span class="hl-0">ã</span><br/><span class="hl-1">* Connection </span><span class="hl-5">#0 to host 127.0.0.1 left intact</span>
</code><button type="button">Copy</button></pre>

<p>Docker be container ì ‘ì†</p>
<ul>
<li>Docker ps ë¡œ Container ID í™•ì¸</li>
</ul>
<pre><code class="bash"><span class="hl-0">docker</span><span class="hl-1"> </span><span class="hl-2">ps</span><span class="hl-1"> </span><br/><span class="hl-0">docker</span><span class="hl-1"> </span><span class="hl-2">exec</span><span class="hl-1"> </span><span class="hl-3">-it</span><span class="hl-1"> </span><span class="hl-3">--user=root</span><span class="hl-1"> &lt;</span><span class="hl-2">CONTAINER</span><span class="hl-1"> </span><span class="hl-2">I</span><span class="hl-1">D&gt; </span><span class="hl-2">/bin/sh</span><br/><span class="hl-0">sed</span><span class="hl-1"> </span><span class="hl-3">-i</span><span class="hl-1"> </span><span class="hl-2">&#39;s/HUB_POSTGRES_HOST=localhost/HUB_POSTGRES_HOST=db/g&#39;</span><span class="hl-1"> </span><span class="hl-2">.env</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">schema</span>
</code><button type="button">Copy</button></pre>

<p>Docker db container ì ‘ì†</p>
<ul>
<li>Docker ps ë¡œ Container ID í™•ì¸</li>
</ul>
<pre><code class="bash"><span class="hl-0">docker</span><span class="hl-1"> </span><span class="hl-2">ps</span><br/><span class="hl-0">docker</span><span class="hl-1"> </span><span class="hl-2">exec</span><span class="hl-1"> </span><span class="hl-3">-it</span><span class="hl-1"> </span><span class="hl-3">--user=root</span><span class="hl-1"> &lt;</span><span class="hl-2">CONTAINER</span><span class="hl-1"> </span><span class="hl-2">I</span><span class="hl-1">D&gt; </span><span class="hl-2">/bin/sh</span><br/><br/><span class="hl-5"># ì»¨í…Œì´ë„ˆ ì•ˆì—ì„œ </span><br/><span class="hl-0">su</span><span class="hl-1"> </span><span class="hl-2">-</span><span class="hl-1"> </span><span class="hl-2">postgres</span><br/><span class="hl-0">psql</span><br/><br/><span class="hl-5"># ì»¨í…Œì´ë„ˆ ì•ˆì˜ postgres cli ì•ˆì—ì„œ</span><br/><span class="hl-0">\list</span>
</code><button type="button">Copy</button></pre>

<a id="md:3-development" class="tsd-anchor"></a><h2 class="tsd-anchor-link">3. Development<a href="#md:3-development" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:31-definition" class="tsd-anchor"></a><h3 class="tsd-anchor-link">3.1. Definition<a href="#md:31-definition" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="https://camo.githubusercontent.com/1061631a676a8f77771da0019c7303f22d352bbbd84f41c4e4d22ef2000ebc41/68747470733a2f2f6769746875622d70726f64756374696f6e2d757365722d61737365742d3632313064662e73332e616d617a6f6e6177732e636f6d2f31333135383730392f3236383137353434312d38306361396338652d346339362d346465622d613863622d3637346539383435656266362e706e67" alt="ERD"></p>
<p>If you want to add a new feature or update ordinary thing in the API level, you should write the code down to the matched <em>API controller</em>, who is stored in the <a href="src/controllers">src/controllers</a> directory as the <a href="#md:34-main-program">Main Program</a>.</p>
<p>However, <strong>Wrtn</strong> does not recommend to writing code down into the <a href="#md:34-main-program">Main Program</a> first, without any consideration. Instead, <strong>Wrtn</strong> recommends to declare the definition first and implement the <a href="#md:34-main-program">Main Program</a> later.</p>
<p>Therefore, if you want to add a new feature in the API level, define the matched data entity in the <a href="src/models">src/models</a> and <a href="src/api/structures">src/api/structures</a> directories. After the data entity definition, declare function header in the matched API controller class in the <a href="src/controllers">src/controllers</a>. Note that, it's only the declaration, header only, not meaning to implement the function body.</p>
<p>After those declarations, build the client <a href="#md:32-software-development-kit">SDK</a> through the <code>npm run build:api</code> command and implement the <a href="#md:33-test-automation-program">Test Automation Program</a> using the <a href="#md:32-software-development-kit">SDK</a> with use case scenarios. Development of the <a href="#md:34-main-program">Main Program</a> should be started after those preparations are all being ready. Of course, the <a href="#md:34-main-program">Main Program</a> can be verified with the pre-developed <a href="#md:33-test-automation-program">Test Automation Program</a> in everytime.</p>
<ul>
<li>Declare data entity (<code>prisma</code> schema file)</li>
<li>Design API function types, without main program implementation</li>
<li>Build the client <a href="32-sdk">SDK</a></li>
<li>Implement the <a href="#md:33-test-automation-program">Test Automation Program</a></li>
<li>Develop the <a href="#md:34-main-program">Main Program</a></li>
<li>Validate the <a href="#md:34-main-program">Main Program</a> through the <a href="#md:33-test-automation-program">Test Automation Program</a></li>
<li>Deploy to the Dev and Real servers.</li>
</ul>
<a id="md:32-software-development-kit" class="tsd-anchor"></a><h3 class="tsd-anchor-link">3.2. Software Development Kit<a href="#md:32-software-development-kit" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><a href="https://gitlab.wrtn.club/wrtn/hub-backend" target="_blank" class="external"><code>@wrtn/hub-backend</code></a> provides SDK (Software Development Kit) for convenience.</p>
<p>For the client developers who are connecting to this backend server, <a href="https://gitlab.wrtn.club/wrtn/hub-backend" target="_blank" class="external"><code>@wrtn/hub-backend</code></a> provides not API documents like the Swagger, but provides the API interaction library, one of the typical SDK (Software Development Kit) for the convenience.</p>
<p>With the SDK, client developers never need to re-define the duplicated API interfaces, by reading Swagger Documents. Just utilize the provided interfaces and asynchronous functions defined in the SDK. It would be much convenient than any other Rest API solutions.</p>
<p>To build the SDK in local, just type the <code>npm run build:sdk</code> command. The SDK would be generated by <a href="https://github.com/samchon/nestia" target="_blank" class="external"><code>nestia</code></a>, by analyzing source code of the <a href="src/controllers">controller</a> classes in the compilation level, automatically. Otherwise you want to publish the SDK .ibrary, run the <code>npm run package:api</code> command instead.</p>
<pre><code class="bash"><span class="hl-5"># BUILD SDK IN LOCAL</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">build:sdk</span><br/><br/><span class="hl-5"># BUILD SDK AND PUBLISH IT TO THE NPM</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">package:api</span>
</code><button type="button">Copy</button></pre>

<p>When the SDK has been published, client programmers can interact with this backend server very easily. Just let them to install the SDK and call the SDK functions with the <code>await</code> symbol like below.</p>
<p><img src="https://user-images.githubusercontent.com/13158709/215004990-368c589d-7101-404e-b81b-fbc936382f05.gif" alt="nestia-sdk-demo"></p>
<pre><code class="typescript"><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">TestValidator</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@nestia/e2e&quot;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> </span><span class="hl-7">typia</span><span class="hl-1"> </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&quot;typia&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">import</span><span class="hl-1"> </span><span class="hl-7">HubApi</span><span class="hl-1"> </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@wrtn/hub-api/lib/index&quot;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">IHubCartCommodity</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@wrtn/hub-api/lib/structures/hub/orders/IHubCartCommodity&quot;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">IHubOrder</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@wrtn/hub-api/lib/structures/hub/orders/IHubOrder&quot;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">IHubSale</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@wrtn/hub-api/lib/structures/hub/sales/IHubSale&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">ConnectionPool</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&quot;../../../../ConnectionPool&quot;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">TestGlobal</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&quot;../../../../TestGlobal&quot;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">test_api_hub_admin_login</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&quot;../actors/test_api_hub_admin_login&quot;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">test_api_hub_customer_join</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&quot;../actors/test_api_hub_customer_join&quot;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">test_api_hub_seller_join</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&quot;../actors/test_api_hub_seller_join&quot;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">generate_random_cart_commodity</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&quot;../carts/internal/generate_random_cart_commodity&quot;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">generate_random_sale</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&quot;../sales/internal/generate_random_sale&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">test_api_hub_order_store</span><span class="hl-1"> = </span><span class="hl-3">async</span><span class="hl-1"> (</span><span class="hl-7">pool</span><span class="hl-1">: </span><span class="hl-8">ConnectionPool</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">// ì•¡í„° ì¤€ë¹„</span><br/><span class="hl-1">  </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-0">test_api_hub_admin_login</span><span class="hl-1">(</span><span class="hl-7">pool</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-0">test_api_hub_seller_join</span><span class="hl-1">(</span><span class="hl-7">pool</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-0">test_api_hub_customer_join</span><span class="hl-1">(</span><span class="hl-7">pool</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// ë§¤ë¬¼ì—ì„œ ì£¼ë¬¸ê¹Œì§€ ì¼ê´„ ìƒì„±</span><br/><span class="hl-1">  </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-9">sale</span><span class="hl-1">: </span><span class="hl-8">IHubSale</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-0">generate_random_sale</span><span class="hl-1">(</span><span class="hl-7">pool</span><span class="hl-1">, </span><span class="hl-2">&quot;approved&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-9">commodity</span><span class="hl-1">: </span><span class="hl-8">IHubCartCommodity</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-0">generate_random_cart_commodity</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-7">pool</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">sale</span><span class="hl-1">,</span><br/><span class="hl-1">  );</span><br/><span class="hl-1">  </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-9">order</span><span class="hl-1">: </span><span class="hl-8">IHubOrder</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-7">HubApi</span><span class="hl-1">.</span><span class="hl-7">functional</span><span class="hl-1">.</span><span class="hl-7">hub</span><span class="hl-1">.</span><span class="hl-7">customers</span><span class="hl-1">.</span><span class="hl-7">orders</span><span class="hl-1">.</span><span class="hl-0">create</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-7">pool</span><span class="hl-1">.</span><span class="hl-7">customer</span><span class="hl-1">,</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-7">goods:</span><span class="hl-1"> [</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-7">commodity_id:</span><span class="hl-1"> </span><span class="hl-7">commodity</span><span class="hl-1">.</span><span class="hl-7">id</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">      ],</span><br/><span class="hl-1">      </span><span class="hl-7">published_at:</span><span class="hl-1"> </span><span class="hl-3">null</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-7">expired_at:</span><span class="hl-1"> </span><span class="hl-3">null</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  );</span><br/><span class="hl-1">  </span><span class="hl-7">typia</span><span class="hl-1">.</span><span class="hl-0">assertEquals</span><span class="hl-1">(</span><span class="hl-7">order</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// ê³ ê°ì€ ì¡°íšŒ ê°€ëŠ¥</span><br/><span class="hl-1">  </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-9">reloaded</span><span class="hl-1">: </span><span class="hl-8">IHubOrder</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-7">HubApi</span><span class="hl-1">.</span><span class="hl-7">functional</span><span class="hl-1">.</span><span class="hl-7">hub</span><span class="hl-1">.</span><span class="hl-7">customers</span><span class="hl-1">.</span><span class="hl-7">orders</span><span class="hl-1">.</span><span class="hl-0">at</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-7">pool</span><span class="hl-1">.</span><span class="hl-7">customer</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">order</span><span class="hl-1">.</span><span class="hl-7">id</span><span class="hl-1">,</span><br/><span class="hl-1">  );</span><br/><span class="hl-1">  </span><span class="hl-7">typia</span><span class="hl-1">.</span><span class="hl-0">assertEquals</span><span class="hl-1">(</span><span class="hl-7">reloaded</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-7">TestValidator</span><span class="hl-1">.</span><span class="hl-0">equals</span><span class="hl-1">(</span><span class="hl-2">&quot;unpublished&quot;</span><span class="hl-1">, </span><span class="hl-7">TestGlobal</span><span class="hl-1">.</span><span class="hl-7">exceptSaleKeys</span><span class="hl-1">)(</span><span class="hl-7">order</span><span class="hl-1">)(</span><br/><span class="hl-1">    </span><span class="hl-7">reloaded</span><span class="hl-1">,</span><br/><span class="hl-1">  );</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// ê·¸ëŸ¬ë‚˜ íŒë§¤ìì™€ ê´€ë¦¬ìëŠ” ì¡°íšŒ ë¶ˆê°€ëŠ¥</span><br/><span class="hl-1">  </span><span class="hl-6">for</span><span class="hl-1"> (</span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-9">actor</span><span class="hl-1"> </span><span class="hl-3">of</span><span class="hl-1"> [</span><span class="hl-2">&quot;admins&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;sellers&quot;</span><span class="hl-1">] </span><span class="hl-6">as</span><span class="hl-1"> </span><span class="hl-3">const</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-7">TestValidator</span><span class="hl-1">.</span><span class="hl-0">httpError</span><span class="hl-1">(</span><span class="hl-2">&quot;can&#39;t read unpublished&quot;</span><span class="hl-1">)(</span><span class="hl-4">404</span><span class="hl-1">)(() </span><span class="hl-3">=&gt;</span><br/><span class="hl-1">      </span><span class="hl-7">HubApi</span><span class="hl-1">.</span><span class="hl-7">functional</span><span class="hl-1">.</span><span class="hl-7">hub</span><span class="hl-1">[</span><span class="hl-7">actor</span><span class="hl-1">].</span><span class="hl-7">orders</span><span class="hl-1">.</span><span class="hl-0">at</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-7">actor</span><span class="hl-1"> === </span><span class="hl-2">&quot;admins&quot;</span><span class="hl-1"> ? </span><span class="hl-7">pool</span><span class="hl-1">.</span><span class="hl-7">admin</span><span class="hl-1"> : </span><span class="hl-7">pool</span><span class="hl-1">.</span><span class="hl-7">seller</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-7">order</span><span class="hl-1">.</span><span class="hl-7">id</span><span class="hl-1">,</span><br/><span class="hl-1">      ),</span><br/><span class="hl-1">    );</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

<a id="md:33-test-automation-program" class="tsd-anchor"></a><h3 class="tsd-anchor-link">3.3. Test Automation Program<a href="#md:33-test-automation-program" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><blockquote>
<p>TDD (Test Driven Development) with SDK</p>
</blockquote>
<p>After the <a href="#md:31-definition">Definition</a> and client <a href="#md:32-software-development-kit">SDK</a> generation, you've to design the use-case scenario and implement a test automation program who represents the use-case scenario and guarantees the <a href="#md:34-main-program">Main Program</a>.</p>
<p>To add a new test function in the Test Automation Program, create a new TS file under the <a href="test/features">test/features</a> directory following the below category and implement the test scenario function with representative function name and <code>export</code> symbol. I think many all of the ordinary files wrote in the <a href="test/features">test/features</a> directory would be good sample for you. Therefore, I will not describe how the make the test function detaily.</p>
<p>Anyway, you've to remind that, the Test Automation Program resets the DB schema whenever being run. Therefore, you've to be careful if import data has been stored in the local (or dev) DB server. To avoid the resetting the DB, configure the <code>skipReset</code> option like below.</p>
<p>Also, the Test Automation Program runs all of the test functions placed into the <a href="test/features">test/features</a> directory. However, those full testing may consume too much time. Therefore, if you want to reduce the testing time by specializing some test functions, use the <code>include</code> option like below.</p>
<ul>
<li><code>include</code>: test only restricted functions who is containing the special keyword.</li>
<li><code>exclude</code>: exclude some functions who is containing the special keyword.</li>
<li><code>reset</code>: do not reset the DB</li>
</ul>
<pre><code class="bash"><span class="hl-5"># test without db reset</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">test</span><span class="hl-1"> </span><span class="hl-3">--</span><span class="hl-1"> </span><span class="hl-3">--reset</span><span class="hl-1"> </span><span class="hl-3">false</span><br/><br/><span class="hl-5"># include or exclude some features</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">test</span><span class="hl-1"> </span><span class="hl-3">--</span><span class="hl-1"> </span><span class="hl-3">--include</span><span class="hl-1"> </span><span class="hl-2">something</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">test</span><span class="hl-1"> </span><span class="hl-3">--</span><span class="hl-1"> </span><span class="hl-3">--include</span><span class="hl-1"> </span><span class="hl-2">cart</span><span class="hl-1"> </span><span class="hl-2">order</span><span class="hl-1"> </span><span class="hl-2">issue</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">test</span><span class="hl-1"> </span><span class="hl-3">--</span><span class="hl-1"> </span><span class="hl-3">--include</span><span class="hl-1"> </span><span class="hl-2">cart</span><span class="hl-1"> </span><span class="hl-2">order</span><span class="hl-1"> </span><span class="hl-2">issue</span><span class="hl-1"> </span><span class="hl-3">--exclude</span><span class="hl-1"> </span><span class="hl-2">index</span><span class="hl-1"> </span><span class="hl-2">deposit</span><br/><br/><span class="hl-5"># run performance benchmark program</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">benchmark</span>
</code><button type="button">Copy</button></pre>

<p>For reference, if you run <code>npm run benchmark</code> command, your test functions defined in the <a href="test/features/api">test/features/api</a> directory would be utilized for performance benchmarking. If you want to see the performance bench result earlier, visit below link please:</p>
<ul>
<li><a href="https://gitlab.wrtn.club/wrtn/gh-devs-be/-/blob/develop/docs/benchmarks/AMD%20Ryzen%209%207940HS%20w%20Radeon%20780M%20Graphics.md?ref_type=heads" target="_blank" class="external">docs/benchmarks/AMD Ryzen 9 7940HS w Radeon 780M Graphics.md</a></li>
</ul>
<a id="md:34-main-program" class="tsd-anchor"></a><h3 class="tsd-anchor-link">3.4. Main Program<a href="#md:34-main-program" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>After <a href="#md:31-definition">Definition</a>, client <a href="#md:32-software-development-kit">SDK</a> building and <a href="#md:33-test-automation-program">Test Automation Program</a> are all prepared, finally you can develop the Main Program. Also, when you've completed the Main Program implementation, it would better to validate the implementation through the pre-built <a href="#md:32-software-development-kit">SDK</a> and <a href="#md:33-test-automation-program">Test Automation Program</a>.</p>
<p>However, do not commit a mistake that writing source codes only in the <a href="src/controllers">controller</a> classes. The API Controller must have a role that only intermediation. The main source code should be write down separately following the directory categorizing. For example, source code about DB I/O should be written into the <a href="src/providers">src/providers</a> directory.</p>
<a id="md:4-deploy" class="tsd-anchor"></a><h2 class="tsd-anchor-link">4. Deploy<a href="#md:4-deploy" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:41-sdk-library" class="tsd-anchor"></a><h3 class="tsd-anchor-link">4.1. SDK Library<a href="#md:41-sdk-library" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Ecosystem ì—ëŠ” <code>@wrtn/hub-api</code> ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì¡´ì¬í•œë‹¤. ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ë°±ì—”ë“œ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ê°„ì˜ í†µì‹ ì„ ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ, í´ë¼ì´ì–¸íŠ¸ ê°œë°œìë“¤ì´ ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•˜ì—¬ ë°±ì—”ë“œ ì„œë²„ì™€ í†µì‹ í•  ìˆ˜ ìˆë‹¤.</p>
<p>ë˜í•œ ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ë°±ì—”ë“œì—ì„œ ì‚¬ìš©í•˜ëŠ” DTO êµ¬ì¡°ì²´ë“¤ì„ í´ë¼ì´ì–¸íŠ¸ì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•´ì¤€ë‹¤.
ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” <code>@wrtn/hub-api</code> ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì‚¬ë‚´ íŒ¨í‚¤ì§€ ì €ì¥ì†Œì¸ <code>NEXUS</code> ì— ë°°í¬ë˜ì–´ ìˆìœ¼ë©°, <code>npm run package:api</code> ëª…ë ¹ì–´ë¥¼ í†µí•˜ì—¬ ë°°í¬í•  ìˆ˜ ìˆë‹¤.</p>
<p>ì•„ë˜ì™€ ê°™ì€ ìˆœì„œë¡œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë°°í¬í•˜ì.</p>
<ol>
<li><code>/packages/api/package.json</code> íŒŒì¼ë¡œ ì´ë™í•˜ì—¬ ë²„ì „ì„ ìˆ˜ì •í•œë‹¤.</li>
</ol>
<p>ğŸš¨ì£¼ì˜ğŸš¨ : root ë””ë ‰í† ë¦¬ì˜ <code>package.json</code> íŒŒì¼ì´ ì•„ë‹Œ, <code>/packages/api/package.json</code> íŒŒì¼ì„ ìˆ˜ì •í•´ì•¼ í•œë‹¤.</p>
<p>ğŸš¨ì£¼ì˜ğŸš¨ : ë™ì¼í•œ ë²„ì „ìœ¼ë¡œ ë°°í¬í• ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ë²„ì „ì„ ì˜ ë³´ê³  ìˆ˜ì • í•´ì•¼í•œë‹¤.</p>
<pre><code class="json"><span class="hl-1">{</span><br/><span class="hl-1">    </span><span class="hl-10">&quot;version&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;x.x.x&quot;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<ol start="2">
<li>ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•œë‹¤.</li>
</ol>
<pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">packag:api</span>
</code><button type="button">Copy</button></pre>

<p>í•´ë‹¹ ìŠ¤í¬ë¦½íŠ¸ì— <code>npm run build</code>ì—ì„œ í–‰í•˜ëŠ” SDK ìƒì„± ìŠ¤í¬ë¦½íŠ¸ê°€ í¬í•¨ë˜ì–´ ìˆê¸° ë–„ë¬¸ì— <code>npm run package:api</code>ë§Œ ì‹¤í–‰ í•˜ë©´ ëœë‹¤.
(í˜¹ì‹œë‚˜ í•˜ëŠ” ë§ˆìŒì— <code>npm run build</code>ë¥¼ í•˜ëŠ”ê±´ ë§ë¦¬ì§€ ì•Šê² ë‹¤.)</p>
<ol start="3">
<li>SDK ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì •ìƒì ìœ¼ë¡œ ë°°í¬ë˜ì—ˆëŠ”ì§€ í™•ì¸í•œë‹¤.</li>
</ol>
<p><a href="https://nexus.wrtn.club/#browse/browse:npm-group:%40wrtn%2Fhub-api" target="_blank" class="external">NEXUS</a>ì— ì ‘ê·¼í•˜ì—¬ ë‚´ê°€ ë°°í¬í•œ SDKê°€ ì œëŒ€ë¡œ ë°°í¬ ë˜ì—ˆëŠ”ì§€ í™•ì¸í•œë‹¤.</p>
<ol start="4">
<li>git commit ì„ í•˜ê³ , git push ë¥¼ í•œë‹¤.</li>
</ol>
<p>ë³€ê²½ëœ ë²„ì „ì„ git ì— ë°˜ì˜í•œë‹¤.</p>
<hr>
<a id="md:ë§Œì•½-dev-ë²„ì „ì˜-sdk-ë¥¼-ë°°í¬í•˜ë ¤ê³ -í• -ê²½ìš°" class="tsd-anchor"></a><h4 class="tsd-anchor-link">ë§Œì•½ DEV ë²„ì „ì˜ SDK ë¥¼ ë°°í¬í•˜ë ¤ê³  í•  ê²½ìš°.<a href="#md:ë§Œì•½-dev-ë²„ì „ì˜-sdk-ë¥¼-ë°°í¬í•˜ë ¤ê³ -í• -ê²½ìš°" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>DEV ë²„ì „ì˜ SDK ëŠ” ì•„ì§ ì™„ì„±ë˜ì§€ ì•Šì€ ê¸°ëŠ¥, Nestia simulate ê¸°ëŠ¥ì´ ì‹¤í–‰ë˜ê³  ìˆì„ ê²½ìš° DEV ë²„ì „ìœ¼ë¡œ ë°°í¬ í•´ì•¼ í•œë‹¤.</p>
<p>ì•„ë˜ì™€ ê°™ì€ ìˆœì„œë¡œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥´ ë°°í¬í•˜ì.</p>
<ol>
<li><code>/packages/api/package.json</code> íŒŒì¼ë¡œ ì´ë™í•˜ì—¬ ë²„ì „ì„ ìˆ˜ì •í•œë‹¤.</li>
</ol>
<pre><code class="json"><span class="hl-1">{</span><br/><span class="hl-1">    </span><span class="hl-10">&quot;version&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;x.x.x-dev.yyyymmdd-x&quot;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<ol start="2">
<li>ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•œë‹¤.</li>
</ol>
<pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">packag:api</span>
</code><button type="button">Copy</button></pre>

<a id="md:nestiaconfigtsì˜-simulate-ì˜µì…˜ì€-ë°±ì—”ë“œ-ì„œë²„ê°€-ì‹¤ì œë¡œ-ë™ì‘í•˜ì§€-ì•Šì•„ë„-sdk-ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ-ëœë¤-ë°ì´í„°ë¥¼-ìƒì„±í•˜ì—¬-ë°˜í™˜í•´ì£¼ëŠ”-ì˜µì…˜ì´ë‹¤" class="tsd-anchor"></a><h5 class="tsd-anchor-link"><code>nestia.config.ts</code>ì˜ simulate ì˜µì…˜ì€ ë°±ì—”ë“œ ì„œë²„ê°€ ì‹¤ì œë¡œ ë™ì‘í•˜ì§€ ì•Šì•„ë„ SDK ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ëœë¤ ë°ì´í„°ë¥¼ ìƒì„±í•˜ì—¬ ë°˜í™˜í•´ì£¼ëŠ” ì˜µì…˜ì´ë‹¤.<a href="#md:nestiaconfigtsì˜-simulate-ì˜µì…˜ì€-ë°±ì—”ë“œ-ì„œë²„ê°€-ì‹¤ì œë¡œ-ë™ì‘í•˜ì§€-ì•Šì•„ë„-sdk-ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ-ëœë¤-ë°ì´í„°ë¥¼-ìƒì„±í•˜ì—¬-ë°˜í™˜í•´ì£¼ëŠ”-ì˜µì…˜ì´ë‹¤" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h5><pre><code class="typescript"><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-9">NESTIA_CONFIG</span><span class="hl-1">: </span><span class="hl-8">INestiaConfig</span><span class="hl-1"> = {</span><br/><span class="hl-1">...</span><br/><span class="hl-1">ìƒëµ</span><br/><span class="hl-1">...</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><br/><span class="hl-5">//   /**</span><br/><span class="hl-5">//    * Allow simulation mode.</span><br/><span class="hl-5">//    *</span><br/><span class="hl-5">//    * If you configure this property to be `true`, the SDK library would be contain</span><br/><span class="hl-5">//    * simulation mode. In the simulation mode, the SDK library would not communicate</span><br/><span class="hl-5">//    * with the real backend server, but just returns random mock-up data</span><br/><span class="hl-5">//    * with requestion data validation.</span><br/><span class="hl-5">//    *</span><br/><span class="hl-5">//    * For reference, random mock-up data would be generated by `typia.random&lt;T&gt;()`</span><br/><span class="hl-5">//    * function.</span><br/><span class="hl-5">//    *</span><br/><span class="hl-5">//    * @default false</span><br/><span class="hl-5">//    */</span><br/><span class="hl-1">   </span><span class="hl-7">simulate</span><span class="hl-1">: </span><span class="hl-3">true</span><br/><br/><span class="hl-1">...</span><br/><span class="hl-1">ìƒëµ</span><br/><span class="hl-1">...</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

<a id="md:42-backend-application" class="tsd-anchor"></a><h3 class="tsd-anchor-link">4.2. Backend Application<a href="#md:42-backend-application" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><code>Ecosystem</code>ì—ì„œëŠ” ê¸°ì¡´ WRTN ì—ì„œ ì œê³µ í•˜ëŠ” Backend Application ê³¼ ë‹¤ë¥´ê²Œ K8S Applicationê°€ ìƒì´í•˜ë‹¤.
ê¸°ì¡´ WRTN ì—ì„œ ì œê³µí•˜ëŠ” <code>william-api</code>ë“±ì€ 1 Application 1 Serverë¥¼ í• ë‹¹ ë°›ì§€ë§Œ <code>Ecosystem</code> ì—ì„œëŠ” 1 Application 3 Serverë¥¼ í• ë‹¹ ë°›ì•˜ë‹¤.</p>
<p>ê·¸ ì´ìœ ëŠ” ë©”ì¸ ì„œë²„ì¸ <code>gh-devs-be</code>ë¥¼ ë™ì‘ì‹œí‚¤ê¸° ìœ„í•œ ì„œë²„ì™€, <code>gh-devs-mutex</code> ì™€ <code>gh-devs-proxy</code> ì„œë²„ê°€ í•„ìš”í•˜ê¸° ë•Œë¬¸ì´ë‹¤.</p>
<p>ê° ì„œë²„ë³„ ì—­í• ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<ol>
<li><code>gh-devs-be</code> : ë©”ì¸ ì„œë²„ë¡œì¨, API ì„œë²„ë¥¼ ë‹´ë‹¹í•œë‹¤.</li>
<li><code>gh-devs-mutex</code> : ë©”ì¸ ì„œë²„ì˜ Mutex ì„œë²„ë¡œì¨, ë„¤íŠ¸ì›Œí¬ ìˆ˜ì¤€ ì„ê³„ ì˜ì—­ ì œì–´ ì„œë²„ë¡œì¨, ì„œë²„ì—ì„œ ë™ì‹œì„±ì„ ì œì–´í•˜ê¸° ìœ„í•œ ì„œë²„ì´ë‹¤.</li>
<li><code>gh-devs-proxy</code> : ë©”ì¸ ì„œë²„ì˜ Proxy ì„œë²„ë¡œì¨, ê¸°ì¡´ <code>Gen-Hub</code> ì‹œì ˆ API ì¤‘ê°œ ì‹œë‚˜ë¦¬ì˜¤ê°€ ìˆì„ ì‹œì ˆ ì„œë²„ì—ì„œ ì œ 3ìì˜ ì„œë²„ë¥¼ í˜¸ì¶œ í•˜ëŠ”ê²Œ ì•„ë‹Œ proxy ì„œë²„ì—ì„œ í˜¸ì¶œ í•˜ë„ë¡ í•˜ì˜€ë‹¤.</li>
</ol>
<p>ê·¸ë¦¬ê³  ë°°í¬ì‹œ PR ì˜ ì»¤ë°‹ ë©”ì‹œì§€ì— ë‹¤ìŒ ë‹¨ì–´ë¥¼ ì¶”ê°€í•´ì£¼ë©´ ëœë‹¤.</p>
<ul>
<li><code>ci:be</code> gh-devs-be ì„œë²„ë¥¼ ë°°í¬ í•˜ê³  ì‹¶ì„ê²½ìš°.</li>
<li><code>ci:proxy</code> gh-devs-proxy ì„œë²„ë¥¼ ë°°í¬ í•˜ê³  ì‹¶ì„ê²½ìš°.</li>
<li><code>ci:mutex</code> gh-devs-mutex ì„œë²„ë¥¼ ë°°í¬ í•˜ê³  ì‹¶ì„ê²½ìš°.</li>
</ul>
<p>ë§Œì•½ í•˜ë‚˜ ì´ìƒì˜ ì„œë²„ë¥¼ ë°°í¬ í•˜ê³  ì‹¶ë‹¤ë©´ <code>ci:be</code> <code>ci:proxy</code> ì™€ ê°™ì´ ì—°ì†í•´ì„œ ì»¤ë°‹ ë©”ì‹œì§€ì— ì¶”ê°€í•´ì£¼ë©´ ëœë‹¤.</p>
<p>Backend Application ì„ ë°°í¬ í•˜ë ¤ë©´ <code>prod</code>, <code>dev</code> í™˜ê²½ì— ë”°ë¼ ë°°í¬ ë°©ë²•ì´ ì‚´ì§ ë‹¬ë¼ì§„ë‹¤.</p>
<a id="md:dev-í™˜ê²½ìœ¼ë¡œ-ë°°í¬-í•˜ëŠ”-ë°©ë²•" class="tsd-anchor"></a><h4 class="tsd-anchor-link">dev í™˜ê²½ìœ¼ë¡œ ë°°í¬ í•˜ëŠ” ë°©ë²•.<a href="#md:dev-í™˜ê²½ìœ¼ë¡œ-ë°°í¬-í•˜ëŠ”-ë°©ë²•" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><ol>
<li><code>gh-devs-be</code> ë ˆí¬ì— MRì„ <code>features</code> into <code>develop</code> ë¸Œëœì¹˜ì— ë¨¸ì§€ í•˜ë„ë¡ ìƒì„±í•œë‹¤.</li>
<li><code>Gitlab</code>ì—ì„œ ë¨¸ì§€ ì§„í–‰ì‹œ <code>Edit commit message</code>ë¼ëŠ” ë²„íŠ¼ì„ í´ë¦­í›„ <code>ci:be</code> ë¼ëŠ” ë‹¨ì–´ë¥¼ ì¶”ê°€í•œë‹¤.</li>
<li>Argocdì—ì„œ <code>gh-devs-be-dev</code>ë¥¼ ì°¾ì•„ ì˜ ì‘ë™ í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤.</li>
</ol>
<a id="md:prod-í™˜ê²½ìœ¼ë¡œ-ë°°í¬-í•˜ëŠ”-ë°©ë²•" class="tsd-anchor"></a><h4 class="tsd-anchor-link">prod í™˜ê²½ìœ¼ë¡œ ë°°í¬ í•˜ëŠ” ë°©ë²•.<a href="#md:prod-í™˜ê²½ìœ¼ë¡œ-ë°°í¬-í•˜ëŠ”-ë°©ë²•" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><ol>
<li><code>gh-devs-be</code> ë ˆí¬ì— MRì„ <code>develop</code> into <code>main</code> ë¸Œëœì¹˜ì— ë¨¸ì§€ í•˜ë„ë¡ ìƒì„±í•œë‹¤.</li>
<li><code>Gitlab</code>ì—ì„œ ë¨¸ì§€ ì§„í–‰ì‹œ <code>Edit commit message</code>ë¼ëŠ” ë²„íŠ¼ì„ í´ë¦­í›„ <code>ci:be</code> ë¼ëŠ” ë‹¨ì–´ë¥¼ ì¶”ê°€í•œë‹¤.</li>
<li><code>Argocd</code>ì—ì„œ ë¨¸ì§€í•œ ë¦´ë¦¬ì¦ˆê°€ ì˜ <code>ECR</code>ì— ì˜¬ë¼ì™”ëŠ”ì§€ í™•ì¸í•œë‹¤.</li>
<li><code>Argocd</code>ì—ì„œ <code>gh-devs-be-prod2</code>ë¥¼ ì°¾ì•„ <code>Sync</code> ë²„íŠ¼ì„ í´ë¦­í•œë‹¤.</li>
</ol>
<a id="md:43-database-migration" class="tsd-anchor"></a><h3 class="tsd-anchor-link">4.3. Database Migration<a href="#md:43-database-migration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Prod DB ë¥¼ ë³€ê²½í•˜ê¸° ìœ„í•´ì„œëŠ”, prisma migration tool ì´ ìƒì„±í•´ì£¼ëŠ” SQL ì´ í•„ìš”í•˜ë‹¤.</p>
<ul>
<li>ë¡œì»¬ì€ <code>npm run schema</code>ë¥¼ DBì— ì ì¬ ë˜ì–´ ìˆëŠ” ëª¨ë“  ë°ì´í„°ê°€ ì‚­ì œëœí›„ schema ë³€ê²½ì´ ì‹¤í–‰ëœë‹¤.</li>
</ul>
<p>ë¨¼ì € ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•¨ìœ¼ë¡œì¨ <code>main</code> ë¸Œëœì¹˜ë¡œë¶€í„° ë¡œì»¬ DB ë¥¼ ì™„ì „íˆ ë¹„ìš°ê³  (<code>reset</code>), ì´ì–´ì„œ ëª¨ë“  í…Œì´ë¸” ë° ì œì•½ì¡°ê±´ë“¤ì„ ìƒì„±í•´ì£¼ëŠ” SQL ì¿¼ë¦¬ë¬¸ì„ ì¤€ë¹„í•˜ì. <code>prisma/migrations/{YYYYMMDDHHIISS}_init/migration.sql</code> ì— ëª¨ë“  í…Œì´ë¸”ì„ ìƒì„±í•´ì£¼ëŠ” SQL ì¿¼ë¦¬ íŒŒì¼ì´ ìƒì„±ë  ê²ƒì´ë‹¤.</p>
<p>ì´í›„ <code>develop</code> ë¸Œëœì¹˜ë¡œ ì´ë™í•˜ì—¬, ë‹¤ì‹œ í•œ ë²ˆ <code>npx prisma migrate dev --schema=prisma/schema --name init</code> ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ì¤€ë‹¤. <code>prisma/migrations</code> í´ë”ì— í˜„ ì‹œê° ê¸°ì¤€ì˜ ìƒˆë¡œìš´ í´ë”ê°€ í•˜ë‚˜ ë” ìƒê²¨ë‚  ê²ƒì´ë©°, ìƒˆë¡œì´ ìƒê²¨ë‚œ í´ë”ì˜ <code>migration.sql</code> íŒŒì¼ì´ ë°”ë¡œ, DB ë³€ê²½ ì‚¬í•­ì„ ì¼ê´„ ë°˜ì˜í•´ì£¼ëŠ” SQL ì¿¼ë¦¬ë¬¸ì´ë‹¤.</p>
<pre><code class="bash"><span class="hl-0">git</span><span class="hl-1"> </span><span class="hl-2">checkout</span><span class="hl-1"> </span><span class="hl-2">main</span><br/><span class="hl-0">git</span><span class="hl-1"> </span><span class="hl-2">pull</span><br/><span class="hl-0">npx</span><span class="hl-1"> </span><span class="hl-2">rimraf</span><span class="hl-1"> </span><span class="hl-2">prisma/migrations</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">build:prisma</span><br/><span class="hl-0">npx</span><span class="hl-1"> </span><span class="hl-2">prisma</span><span class="hl-1"> </span><span class="hl-2">migrate</span><span class="hl-1"> </span><span class="hl-2">reset</span><span class="hl-1"> </span><span class="hl-3">--schema=prisma/schema</span><span class="hl-1"> </span><span class="hl-3">--force</span><br/><span class="hl-0">npx</span><span class="hl-1"> </span><span class="hl-2">prisma</span><span class="hl-1"> </span><span class="hl-2">migrate</span><span class="hl-1"> </span><span class="hl-2">dev</span><span class="hl-1"> </span><span class="hl-3">--schema=prisma/schema</span><span class="hl-1"> </span><span class="hl-3">--name</span><span class="hl-1"> </span><span class="hl-2">init</span><br/><br/><span class="hl-0">git</span><span class="hl-1"> </span><span class="hl-2">checkout</span><span class="hl-1"> </span><span class="hl-2">develop</span><br/><span class="hl-0">git</span><span class="hl-1"> </span><span class="hl-2">pull</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">build:prisma</span><br/><span class="hl-0">npx</span><span class="hl-1"> </span><span class="hl-2">prisma</span><span class="hl-1"> </span><span class="hl-2">migrate</span><span class="hl-1"> </span><span class="hl-2">dev</span><span class="hl-1"> </span><span class="hl-3">--schema=prisma/schema</span><span class="hl-1"> </span><span class="hl-3">--name</span><span class="hl-1"> </span><span class="hl-2">init</span>
</code><button type="button">Copy</button></pre>

<p>ë‹¨, ì´ migrationn SQL ê³§ë°”ë¡œ ì ìš©í•˜ì§€ ë§ê³ , ë°˜ë“œì‹œ ë°±ì—”ë“œ ê°œë°œìê°€ í•œ ë²ˆ ê²€í† í•´ì£¼ë„ë¡ í•˜ì. ê·¸ë¦¬ê³  ìë™ ìƒì„±ëœ migration SQL ì•ë’¤ë¡œ, ë‹¤ìŒ SQL ì¿¼ë¦¬ë¬¸ë“¤ì„ ì¶”ê°€í•´ì¤€ë‹¤. ì•ìª½ì€ í˜„í–‰ ìŠ¤í‚¤ë§ˆë¥¼ <code>hub</code> ë¡œ ê³ ì •í•´ì£¼ëŠ” ê²ƒì´ë©°, ë’·ìª½ì€ ìƒˆë¡œì´ ìƒì„±ëœ í…Œì´ë¸”ë“¤ì— ëŒ€í•˜ì—¬ ìœ ì €ë“¤ì—ê²Œ ì½ê¸°/ì“°ê¸° ë“±ì˜ ê¶Œí•œì„ í• ë‹¹í•´ì£¼ëŠ” ì¿¼ë¦¬ë¬¸ì´ë‹¤.</p>
<pre><code class="sql">-- AT THE TOP
SET schema 'hub';

-- AT THE BOTTOM
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA hub TO wrtn;
GRANT SELECT ON ALL TABLES IN SCHEMA hub TO wrtn_r;
</code><button type="button">Copy</button></pre>

<blockquote>
<p>ìœ„ ì „í›„ ì¿¼ë¦¬ë¬¸ì€ <code>src/executable/migrations/${date}/index.ts</code> ì— ë„£ê³ , migration SQL ê³¼ ê²°í•©í•˜ì—¬ ì‚¬ìš©í•˜ì—¬ë„ ìƒê´€ì—†ë‹¤; <code>string concat</code>.</p>
</blockquote>
<p>ì´í›„ ì™„ì„±ëœ migration SQL ì¿¼ë¦¬ë¥¼ <code>src/executable/migrations</code> í´ë” ë°‘ì— ì €ì¥í•˜ê³ , <code>index.ts</code> íŒŒì¼ì„ ìƒˆë¡œì´ ìƒì„±í•˜ì—¬ í•´ë‹¹ migration SQL ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•´ì£¼ëŠ” í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ì. ê·¸ë¦¬ê³  ë‹¨ìˆœ migration SQL ë§Œìœ¼ë¡œ DB ë³€ê²½ ì‘ì—…ì´ ëë‚˜ì§€ ì•„ë‹ˆí•˜ëŠ” ê²½ìš°, ì–´í”Œë¦¬ì¼€ì´ì…˜ ìˆ˜ì¤€ì˜ ì¶”ê°€ ì‘ì—…ì„ í•´ë‹¹ <code>index.ts</code> íŒŒì¼ì— êµ¬í˜„í•´ì£¼ë©´ ëœë‹¤.</p>
<p>ë‹¨, ìœ„ì™€ ê°™ì€ DB ë³€ê²½ ì‘ì—…ì´ ì‹¤ì œë¡œ ë³¸ ì„œë¹„ìŠ¤ì— ì¤‘ëŒ€í•œ ë²„ê·¸ë¥¼ ì¼ìœ¼í‚¤ì§€ ì•ŠëŠ”ì§€ ì—„ê²©í•˜ê²Œ ê²€ì¦í•´ì•¼í•˜ëŠ”ë°, ì´ëŠ” í…ŒìŠ¤íŠ¸ ìë™í™” í”„ë¡œê·¸ë¨ì„ DB migration SQL ì‹¤í–‰ ì „í›„ë¡œ ëª¨ë‘ ì‹¤í–‰í•´ë³´ëŠ” ê²ƒìœ¼ë¡œ ê°ˆìŒí•œë‹¤.</p>
<p>Migration (<code>src/executable/migrations</code>) í”„ë¡œê·¸ë¨ì„ <code>main</code> ì— ì»¤ë°‹í•œ í›„, ìœ„ ëª…ë ¹ì–´ë¥¼ í†µí•˜ì—¬ í…ŒìŠ¤íŠ¸ í”„ë¡œê·¸ë¨ì„ DB migration ì „í›„ë¡œ ëª¨ë‘ ì‹¤í–‰í•˜ì—¬ ê·¸ ì•ˆì •ì„±ì„ ê²€ì¦í•´ë³´ì. ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ê²ƒì€ <code>main</code> ë¸Œëœì¹˜ì—ì„œëŠ” <code>--reset true</code> ë¥¼ í•˜ì—¬ DB ë¥¼ ì´ˆê¸°í™”í•˜ê³ , <code>develop</code> ë¸Œëœì¹˜ì—ì„œëŠ” <code>--reset false</code> ë¡œ migration í”„ë¡œê·¸ë¨ì´ ë³€ê²½í•œ DB ë¥¼ ìˆëŠ” ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì—¬ ì•ˆì •ì„±ì„ ì¬ê³ í•˜ëŠ” ê²ƒì´ë‹¤.</p>
<pre><code class="bash"><span class="hl-0">git</span><span class="hl-1"> </span><span class="hl-2">checkout</span><span class="hl-1"> </span><span class="hl-2">main</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">build</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">test</span><span class="hl-1"> </span><span class="hl-3">--</span><span class="hl-1"> </span><span class="hl-3">--reset</span><span class="hl-1"> </span><span class="hl-3">true</span><br/><br/><span class="hl-0">npx</span><span class="hl-1"> </span><span class="hl-2">ts-node</span><span class="hl-1"> </span><span class="hl-2">src/executable/migrations/{YYYYMMDD}</span><br/><br/><span class="hl-0">git</span><span class="hl-1"> </span><span class="hl-2">checkout</span><span class="hl-1"> </span><span class="hl-2">develop</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">build</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">test</span><span class="hl-1"> </span><span class="hl-3">--</span><span class="hl-1"> </span><span class="hl-3">--reset</span><span class="hl-1"> </span><span class="hl-3">false</span>
</code><button type="button">Copy</button></pre>

<p>ëª¨ë“  ê²ƒì´ ì™„ë£Œë˜ê±°ë“ , ì´ì œ DB migration ì„ ì‹¤ì‹œí•˜ì.</p>
<p>ì°¸ê³ ë¡œ ë³¸ì¸ì˜ ê²½ìš°, <code>main</code> ê³¼ <code>develop</code> ë¸Œëœì¹˜ ì €ì¥ì†Œë¥¼ ê°ê° fork í•˜ì—¬ ì‹¤í—˜í•˜ê³ ëŠ” í•œë‹¤.</p>
<a id="md:5-appendix" class="tsd-anchor"></a><h2 class="tsd-anchor-link">5. Appendix<a href="#md:5-appendix" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:51-npm-run-commands" class="tsd-anchor"></a><h3 class="tsd-anchor-link">5.1. NPM Run Commands<a href="#md:51-npm-run-commands" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Test
<ul>
<li><strong><code>test</code></strong>: <strong>í…ŒìŠ¤íŠ¸ í”„ë¡œê·¸ë¨ ì‹¤í–‰, <code>build:test</code> ë‚´ì§€ <code>dev</code> í›„ì— ì‹¤í–‰ ê°€ëŠ¥</strong></li>
<li><code>benchmark</code>: í¼í¬ë¨¼ìŠ¤ ë²¤ì¹˜ë§ˆí¬ í”„ë¡œê·¸ë¨ ì‹¤í–‰</li>
</ul>
</li>
<li>Build
<ul>
<li><code>build</code>: ì•„ë˜ SDK/Test/Main í”„ë¥´ê·¸ë¨ë“¤ì„ ëª¨ë‘ ë¹Œë“œí•¨</li>
<li><code>build:sdk</code>: SDK ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¹Œë“œ, ë¡œì»¬ ì „ìš©</li>
<li><code>build:test</code>: í…ŒìŠ¤íŠ¸ í”„ë¡œê·¸ë¨ ë¹Œë“œ</li>
<li><code>build:main</code>: ë©”ì¸ í”„ë¡œê·¸ë¨ ë¹Œë“œ</li>
<li><strong><code>dev</code></strong>: <strong>í…ŒìŠ¤íŠ¸ í”„ë¡œê·¸ë¨ì˜ incremental ë¹Œë”</strong></li>
<li><code>eslint</code>: EsLint ê²€ì‚¬ê¸°</li>
<li><code>pretter</code>: í”„ë¦¬í‹°ì–´ ì¼ê´„ ì ìš©</li>
</ul>
</li>
<li>Deploy
<ul>
<li><code>package:api</code>: SDK ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¹Œë“œ í›„ NPM íŒ¨í‚¤ì§€ ë°°í¬í•˜ê¸°</li>
<li><code>schema</code>: ë¡œì»¬ DB ìŠ¤í‚¤ë§ˆ ìë™ ìƒì„±ê¸°</li>
<li><code>start</code>: ë°±ì—”ë“œ ì„œë²„ ë‹¨ë… ì‹¤í–‰</li>
<li><code>pm2:start</code>: PM2 ë¥¼ ì´ìš©í•˜ì—¬ ë°±ì—”ë“œ ì„œë²„ ì‹¤í–‰</li>
<li><code>pm2:start:local</code>: ë¡œì»¬ ì „ìš© PM2 ë°±ì—”ë“œ ì„œë²„ ì‹¤í–‰ê¸°</li>
<li><code>pm2:start:reload</code>: PM2 ì¬ì‹¤í–‰ê¸°</li>
<li><code>pm2:start:swagger</code>: Swagger UI ì‹¤í–‰ê¸°, ë¡œì»¬ ì „ìš©</li>
<li><code>pm2:stop</code>: PM2 ë°±ì—”ë“œ ì„œë²„ ì¢…ë£Œí•˜ê¸°</li>
</ul>
</li>
</ul>
<a id="md:52-directories" class="tsd-anchor"></a><h3 class="tsd-anchor-link">5.2. Directories<a href="#md:52-directories" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><a href="media/launch.json">.vscode/launch.json</a>: Configuration for debugging</li>
<li><a href="packages/">packages/</a>: Packages to publish as private npm modules
<ul>
<li><a href="packages/api">packages/api/</a>: Client <a href="#md:32-software-development-kit">SDK</a> library for the client developers</li>
</ul>
</li>
<li><a href="docs/"><strong>docs/</strong></a>: Documents like ERD (Entity Relationship Diagram)</li>
<li><a href="prisma/schema.prisma">prisma/schema.prisma</a>: Prisma Schema File</li>
<li><a href="src/">src/</a>: TypeScript Source directory
<ul>
<li><a href="src/api/">src/api/</a>: Client SDK that would be published to the <code>@ORGANIZATION/PROJECT-api</code>
<ul>
<li><a href="src/api/functional/"><strong>src/api/functional/</strong></a>: API functions generated by the <a href="https://github.com/samchon/nestia" target="_blank" class="external"><code>nestia</code></a></li>
<li><a href="src/api/structures/"><strong>src/api/structures/</strong></a>: DTO structures</li>
</ul>
</li>
<li><a href="src/controllers/">src/controllers/</a>: Controller classes of the Main Program</li>
<li><a href="src/providers/">src/providers/</a>: Service providers (bridge between DB and controllers)</li>
<li><a href="src/executable/">src/executable/</a>: Executable programs</li>
</ul>
</li>
<li><a href="test/"><strong>test/</strong></a>: Test Automation Program</li>
</ul>
<a id="md:53-related-repositories" class="tsd-anchor"></a><h3 class="tsd-anchor-link">5.3. Related Repositories<a href="#md:53-related-repositories" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Ecosystem
<ul>
<li><a href="https://gitlab.wrtn.club/wrtn/studio2-poc-fe" target="_blank" class="external"><code>@gitlab:wrtn/studio2-poc-fe</code></a></li>
<li><a href="https://gitlab.wrtn.club/wrtn/ecosystem/store-web" target="_blank" class="external">`@gitlab:wrtn/ecosystem/store-web</a></li>
<li><a href="https://github.com/wrtnio/connectors" target="_blank" class="external"><code>wrtnio/connectors</code></a></li>
</ul>
</li>
<li>Base Libraries
<ul>
<li><a href="https://github.com/samchon/typia" target="_blank" class="external"><code>samchon/typia</code></a></li>
<li><a href="https://github.com/samchon/nestia" target="_blank" class="external"><code>samchon/nestia</code></a></li>
<li><a href="https://github.com/samchon/openapi" target="_blank" class="external"><code>samchon/openapi</code></a></li>
<li><a href="https://github.com/samchon/tgrid" target="_blank" class="external"><code>samchon/tgrid</code></a></li>
</ul>
</li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:hub-backend"><span>Hub <wbr/>Backend</span></a><ul><li><a href="#md:1-outine"><span>1. <wbr/>Outine</span></a></li><li><a href="#md:2-setup"><span>2. <wbr/>Setup</span></a></li><li><ul><li><a href="#md:21-nodejs"><span>2.1. <wbr/>NodeJS</span></a></li><li><a href="#md:22-postgres"><span>2.2. <wbr/>Postgres</span></a></li><li><a href="#md:23-backend-server"><span>2.3. <wbr/>Backend <wbr/>Server</span></a></li><li><a href="#md:24-aws"><span>2.4 AWS</span></a></li></ul></li><li><a href="#md:25-docker-ì•ˆí•´ë„-ë¨"><span>2.5. <wbr/>Docker (ì•ˆí•´ë„ ë¨)</span></a></li><li><a href="#md:3-development"><span>3. <wbr/>Development</span></a></li><li><ul><li><a href="#md:31-definition"><span>3.1. <wbr/>Definition</span></a></li><li><a href="#md:32-software-development-kit"><span>3.2. <wbr/>Software <wbr/>Development <wbr/>Kit</span></a></li><li><a href="#md:33-test-automation-program"><span>3.3. <wbr/>Test <wbr/>Automation <wbr/>Program</span></a></li><li><a href="#md:34-main-program"><span>3.4. <wbr/>Main <wbr/>Program</span></a></li></ul></li><li><a href="#md:4-deploy"><span>4. <wbr/>Deploy</span></a></li><li><ul><li><a href="#md:41-sdk-library"><span>4.1. SDK <wbr/>Library</span></a></li><li><ul><li><a href="#md:ë§Œì•½-dev-ë²„ì „ì˜-sdk-ë¥¼-ë°°í¬í•˜ë ¤ê³ -í• -ê²½ìš°"><span>ë§Œì•½ DEV ë²„ì „ì˜ SDK ë¥¼ ë°°í¬í•˜ë ¤ê³  í•  ê²½ìš°.</span></a></li><li><ul><li><a href="#md:nestiaconfigtsì˜-simulate-ì˜µì…˜ì€-ë°±ì—”ë“œ-ì„œë²„ê°€-ì‹¤ì œë¡œ-ë™ì‘í•˜ì§€-ì•Šì•„ë„-sdk-ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ-ëœë¤-ë°ì´í„°ë¥¼-ìƒì„±í•˜ì—¬-ë°˜í™˜í•´ì£¼ëŠ”-ì˜µì…˜ì´ë‹¤"><span>nestia.config.tsì˜ simulate ì˜µì…˜ì€ ë°±ì—”ë“œ ì„œë²„ê°€ ì‹¤ì œë¡œ ë™ì‘í•˜ì§€ ì•Šì•„ë„ SDK ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ëœë¤ ë°ì´í„°ë¥¼ ìƒì„±í•˜ì—¬ ë°˜í™˜í•´ì£¼ëŠ” ì˜µì…˜ì´ë‹¤.</span></a></li></ul></li></ul></li><li><a href="#md:42-backend-application"><span>4.2. <wbr/>Backend <wbr/>Application</span></a></li><li><ul><li><a href="#md:dev-í™˜ê²½ìœ¼ë¡œ-ë°°í¬-í•˜ëŠ”-ë°©ë²•"><span>dev í™˜ê²½ìœ¼ë¡œ ë°°í¬ í•˜ëŠ” ë°©ë²•.</span></a></li><li><a href="#md:prod-í™˜ê²½ìœ¼ë¡œ-ë°°í¬-í•˜ëŠ”-ë°©ë²•"><span>prod í™˜ê²½ìœ¼ë¡œ ë°°í¬ í•˜ëŠ” ë°©ë²•.</span></a></li></ul></li><li><a href="#md:43-database-migration"><span>4.3. <wbr/>Database <wbr/>Migration</span></a></li></ul></li><li><a href="#md:5-appendix"><span>5. <wbr/>Appendix</span></a></li><li><ul><li><a href="#md:51-npm-run-commands"><span>5.1. NPM <wbr/>Run <wbr/>Commands</span></a></li><li><a href="#md:52-directories"><span>5.2. <wbr/>Directories</span></a></li><li><a href="#md:53-related-repositories"><span>5.3. <wbr/>Related <wbr/>Repositories</span></a></li></ul></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="index.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>@wrtn/hub-backend</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
